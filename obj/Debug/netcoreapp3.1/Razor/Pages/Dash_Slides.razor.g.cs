#pragma checksum "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "fc626415180b6323c7fe75e7629282140b060b79"
// <auto-generated/>
#pragma warning disable 1591
namespace SQL_Connection.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using SQL_Connection;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\_Imports.razor"
using SQL_Connection.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
using SQL_Connection.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
using System.Globalization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
using Radzen;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
using Radzen.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/dash")]
    public partial class Dash_Slides : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<h3>Number of sales by quarter</h3> \r\n");
            __builder.OpenElement(1, "div");
            __builder.AddAttribute(2, "class", "row");
            __builder.AddMarkupContent(3, "\r\n    ");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "col-md-6 col-sm-12 p-4");
            __builder.AddMarkupContent(6, "\r\n        ");
            __builder.OpenComponent<Radzen.Blazor.RadzenChart>(7);
            __builder.AddAttribute(8, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(9, "\r\n            ");
                __Blazor.SQL_Connection.Pages.Dash_Slides.TypeInference.CreateRadzenBarSeries_0(__builder2, 10, 11, 
#nullable restore
#line 13 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
                                    salesCount

#line default
#line hidden
#nullable disable
                , 12, "Quarter", 13, "Revenue");
                __builder2.AddMarkupContent(14, "\r\n            ");
                __builder2.OpenComponent<Radzen.Blazor.RadzenValueAxis>(15);
                __builder2.AddAttribute(16, "Formatter", (System.Func<System.Object, System.String>)(
#nullable restore
#line 14 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
                                         FormatNormally

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(17, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(18, "\r\n                ");
                    __builder3.OpenComponent<Radzen.Blazor.RadzenGridLines>(19);
                    __builder3.AddAttribute(20, "Visible", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 15 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
                                          true

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(21, "\r\n                ");
                    __builder3.OpenComponent<Radzen.Blazor.RadzenAxisTitle>(22);
                    __builder3.AddAttribute(23, "Text", "Number of orders");
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(24, "\r\n            ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(25, "\r\n            ");
                __builder2.OpenComponent<Radzen.Blazor.RadzenBarOptions>(26);
                __builder2.AddAttribute(27, "Radius", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#nullable restore
#line 18 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
                                      5

#line default
#line hidden
#nullable disable
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(28, "\r\n        ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(29, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(30, "\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(31, "\r\n\r\n");
            __builder.AddMarkupContent(32, "<h3>Upcoming birthdays:</h3>   \r\n");
            __builder.AddMarkupContent(33, "<div class=\"row\">\r\n    <ul>\r\n    </ul>\r\n</div>\r\n\r\n");
            __builder.AddMarkupContent(34, "<h3>Announcements:</h3>   \r\n");
            __builder.OpenElement(35, "div");
            __builder.AddAttribute(36, "class", "row");
            __builder.AddMarkupContent(37, "\r\n    ");
            __builder.OpenElement(38, "ul");
            __builder.AddMarkupContent(39, "\r\n");
#nullable restore
#line 36 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
         foreach (String filename in announceFiles())
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(40, "            ");
            __builder.OpenElement(41, "img");
            __builder.AddAttribute(42, "src", 
#nullable restore
#line 38 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
                       "AnnouncementSlides/" + filename

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(43, "width", "300px");
            __builder.CloseElement();
            __builder.AddMarkupContent(44, "\r\n");
#nullable restore
#line 39 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(45, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "\r\n");
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 43 "C:\Users\lhotchkiss\source\repos\SQL-Connection\Sql-connection-master\Sql-connection-master\Pages\Dash_Slides.razor"
       
        #region Bar Chart
    class DataItem //This class is the default example for a bar graph.
    {
        public string Quarter { get; set; }
        public double Revenue { get; set; }
    }

    List<Sales> sales = new List<Sales>();
    Sales sale = new Sales();
    DataItem[] salesCount = new DataItem[] { };
    string Message = "";

    string FormatNormally(object value)  // idk why radzen demands a formatter, this just turns an int into a string
    {
        return ((double)value).ToString();
    }

    protected override async Task OnInitializedAsync()
    {
        GetSales();
        CountQuarters();
    }

    private void GetSales()
    {
        sales = salesService.GetSales();
    }

    private void CountQuarters()
    {
        Dictionary<String, int> quarterData = new Dictionary<string, int>();
        String thisQuarter;

        foreach (Sales sale in sales)
        {
            thisQuarter = sale.Year.ToString() + " Q" + GetQuarter(sale.Month).ToString();
            if (quarterData.ContainsKey(thisQuarter))
            {
                quarterData[thisQuarter] += 1;
            }
            else
            {
                quarterData[thisQuarter] = 1;
            }
        }


        salesCount = new DataItem[quarterData.Count];
        int count = 0;
        String[] sortedQuarters = quarterData.Keys.ToArray();
        Array.Sort(sortedQuarters);

        foreach (String Key in sortedQuarters)
        {
            salesCount[count] = new DataItem
            {
                Quarter = Key,
                Revenue = quarterData[Key]
            };
            count += 1;
        }


    }

    public static int GetQuarter(String month)
    {
        switch (month)
        {
            case "January":
            case "February":
            case "March":
                return 1;
            case "April":
            case "May":
            case "June":
                return 2;
            case "July":
            case "August":
            case "September":
                return 3;
            case "October":
            case "November":
            case "December":
                return 4;
            default:
                return 0;
        }
    }
    #endregion

    #region Birthdays

    String birthdayListFile = "Data/birthday_list.json";

    /*
    This function gets a number of birthdays equal to count
    It will return them preformatted as "name: date"
    */
    //List<String> getBirthdays(int count)
    //{
    //    Dictionary<String, DateTime> birthday_dict = readBirthdays();
    //    List<String> all_birthdays = birthday_dict.Keys.ToList();
    //    all_birthdays.Sort((a, b) => ((birthday_dict[a] - DateTime.Today).Days - (birthday_dict[b] - DateTime.Today).Days));
    //    // after sorting all_birthdays, the nest step is to add the dates to it so the list is useable
    //    all_birthdays = (from name in all_birthdays select name + ": " + birthday_dict[name].Month.ToString() + "/" + birthday_dict[name].Day.ToString()).ToList();

    //    if (all_birthdays.Count < count) { count = all_birthdays.Count; } //if you ask for more birthdays than we have, just give them all of them

    //    List<string> birthdays = all_birthdays.Take(count).ToList();

    //    return birthdays;
    //}



    /*
    This function reads the excel file birthdayListFile and create a dictionary of names to DateTime objects
    For simplicity off comparisons late, the DateTime objects will represent the person's next birthday this year
    */
    Dictionary<String, DateTime> readBirthdays()
    {
        Dictionary<String, DateTime> birthdays = new Dictionary<String, DateTime>();
        DateTime today = DateTime.Today;

        // read in the file
        Dictionary<String, List<int>> items;
        using (StreamReader r = new StreamReader(birthdayListFile))
        {
            string json = r.ReadToEnd();
            items = JsonConvert.DeserializeObject<Dictionary<String, List<int>>>(json); // The json should be {"Person name":[month, day],}
        }

        foreach (String name in items.Keys)
        {
            DateTime date = new DateTime(today.Year, items[name][0], items[name][1]);
            if (date < today) { date = date.AddYears(1); }
            birthdays[name] = date;
        }

        return birthdays;
    }

    #endregion

    #region Announcements

    string expireJsonFile = "Data/announce_expire.json";
    private Dictionary<String, DateTime> loadSlides()
    {
        // read in the json file
        Dictionary<String, DateTime> items;
        using (StreamReader r = new StreamReader(expireJsonFile))
        {
            string json = r.ReadToEnd();
            items = JsonConvert.DeserializeObject<Dictionary<String, DateTime>>(json); // The json should be {"file_name":expiredate,}
        }
        return items;
    }

    List<String> announceFiles()
    {
        List<String> current_files = new List<string>();
        Dictionary<String, DateTime> all_files = loadSlides();
        foreach (string filename in all_files.Keys)
        {
            if (all_files[filename] > DateTime.Now)
            {
                current_files.Add(filename);
            }
        }
        return current_files;
    }

    #endregion

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private SQL_Connection.IServices.ISalesService salesService { get; set; }
    }
}
namespace __Blazor.SQL_Connection.Pages.Dash_Slides
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateRadzenBarSeries_0<TItem>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Collections.Generic.IEnumerable<TItem> __arg0, int __seq1, global::System.String __arg1, int __seq2, global::System.String __arg2)
        {
        __builder.OpenComponent<global::Radzen.Blazor.RadzenBarSeries<TItem>>(seq);
        __builder.AddAttribute(__seq0, "Data", __arg0);
        __builder.AddAttribute(__seq1, "CategoryProperty", __arg1);
        __builder.AddAttribute(__seq2, "ValueProperty", __arg2);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
